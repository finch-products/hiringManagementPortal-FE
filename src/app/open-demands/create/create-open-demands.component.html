<mat-card class="form-container">
  <form [formGroup]="demandForm" (ngSubmit)="onSubmit()">

    <div class="form-row">
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>CTool Number</mat-label>
        <input matInput formControlName="dem_ctoolnumber" required>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>CTool Date</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="dem_ctooldate"
          required>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Client Name</mat-label>
        <mat-select formControlName="dem_clm_id">
          <mat-option *ngFor="let client of clients" [value]="client.clm_id">
            {{ client.clm_name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Client Location</mat-label>
        <mat-select formControlName="dem_lcm_id">
          <mat-option *ngFor="let location of locations"
            [value]="location.lcm_id">
            {{ location.lcm_name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Tentative Required By</mat-label>
        <input matInput [matDatepicker]="datePicker"
          formControlName="dem_validtill">
        <mat-datepicker-toggle matSuffix
          [for]="datePicker"></mat-datepicker-toggle>
        <mat-datepicker #datePicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Skillset</mat-label>
        <textarea matInput formControlName="dem_skillset"
          maxlength="500"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>LOB</mat-label>
        <mat-select formControlName="dem_lob_id">
          <mat-option *ngFor="let lob of lobs" [value]="lob.lob_id">
            {{ lob.lob_name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Internal Department</mat-label>
        <mat-select formControlName="dem_idm_id">
          <mat-option *ngFor="let dept of depts" [value]="dept.idm_id">
            {{ dept.idm_unitname}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>No Of Positions</mat-label>
        <input matInput formControlName="dem_positions">
      </mat-form-field>

      <!-- Internal or External Selection -->
      <mat-radio-group formControlName="isInternal">
        <mat-radio-button value="yes">Internal</mat-radio-button>
        <mat-radio-button value="no">External</mat-radio-button>
      </mat-radio-group>

      <!-- RR Number Field (Visible when "Yes" is selected) -->
      <mat-form-field appearance="fill" class="form-field" *ngIf="isInternal">
        <mat-label>RR Numbers</mat-label>
        <input matInput formControlName="dem_rrnumber">
      </mat-form-field>

      <!-- JR Number Field (Visible when "No" is selected) -->
      <mat-form-field appearance="fill" class="form-field" *ngIf="!isInternal">
        <mat-label>JR Numbers</mat-label>
        <input matInput formControlName="dem_jrnumber">
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field">
        <mat-label>RR Grade</mat-label>
        <input matInput formControlName="dem_rrgade">
      </mat-form-field>

      <mat-form-field appearance="fill" class="form-field field-30">
        <mat-label>GCB Level</mat-label>
        <input matInput formControlName="dem_gcblevel">
      </mat-form-field>

      <mat-radio-group formControlName="dem_isreopened" appearance="fill"
      class="form-field">
        <mat-label>Reopen</mat-label>
        <mat-radio-button value="yes">Yes</mat-radio-button>
        <mat-radio-button value="no">No</mat-radio-button>
      </mat-radio-group>

      <mat-radio-group formControlName="dem_isactive" appearance="fill"
        class="form-field">
        <mat-label>Active?</mat-label>
        <mat-radio-button value="yes">Yes</mat-radio-button>
        <mat-radio-button value="no">No</mat-radio-button>
      </mat-radio-group>

      <div class="file-input-container">
        <label for="job_description">Upload Job Description</label>
        <input type="file" id="dem_jd" (change)="onFileSelected($event)">
      </div>

      <mat-form-field appearance="fill" class="form-field field-30">
        <mat-label>Comment</mat-label>
        <textarea matInput formControlName="dem_comment" rows="3"></textarea>
      </mat-form-field>
    </div>

    <div class="submit-container">
      <button mat-raised-button color="primary"
        type="submit" class="cancel">Cancel</button>
      <button mat-raised-button color="primary"
        type="submit" class="submit">Submit</button>
    </div>
  </form>
</mat-card>

<app-list-open-demands></app-list-open-demands>
